<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.1.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.2">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.2">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.2">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.2" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '7.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta property="og:type" content="website">
<meta property="og:title" content="BurningBright">
<meta property="og:url" content="http://linchenguang.com/page/4/index.html">
<meta property="og:site_name" content="BurningBright">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="BurningBright">





  
  
  <link rel="canonical" href="http://linchenguang.com/page/4/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>BurningBright</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">BurningBright</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>Categories</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://linchenguang.com/2018/08/03/Hide-cmd-windows-in-MFC-console-program/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Leon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BurningBright">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/08/03/Hide-cmd-windows-in-MFC-console-program/" class="post-title-link" itemprop="url">Hide cmd windows in MFC console program</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-08-03 09:45:06" itemprop="dateCreated datePublished" datetime="2018-08-03T09:45:06+08:00">2018-08-03</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-12-16 14:31:36" itemprop="dateModified" datetime="2018-12-16T14:31:36+08:00">2018-12-16</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/c/" itemprop="url" rel="index"><span itemprop="name">c++</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> UNICODE</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> comment( linker, <span class="meta-string">"/subsystem:\"windows\" /entry:\"wmainCRTStartup\""</span>)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> comment( linker, <span class="meta-string">"/subsystem:\"windows\" /entry:\"mainCRTStartup\""</span>)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>
<p>In unicode environment the entry point is <code>wmainCRTStartup</code>.<br>MFC use <code>wmainCRTStartup</code> to start program’s <code>main</code>, the linker subsystem<br>can choose <code>CONSOLE|WINDOWS|NATIVE|POSIX</code>, if settle <code>WINDOWS</code> mean no console.</p>
<p><img src="/2018/08/03/Hide-cmd-windows-in-MFC-console-program/TIM20180803095930.jpg" alt="TIM20180803095930.jpg"><br><img src="/2018/08/03/Hide-cmd-windows-in-MFC-console-program/TIM20180803095930.jpg" alt="TIM20180803095930.jpg"></p>
<p><a href="https://blog.csdn.net/mdcire/article/details/53456673" target="_blank" rel="noopener">https://blog.csdn.net/mdcire/article/details/53456673</a><br><a href="https://blog.csdn.net/wenhao_ir/article/details/50897312" target="_blank" rel="noopener">https://blog.csdn.net/wenhao_ir/article/details/50897312</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://linchenguang.com/2018/07/25/Springboot-Schedule/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Leon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BurningBright">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/07/25/Springboot-Schedule/" class="post-title-link" itemprop="url">Springboot Schedule</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-07-25 14:59:21" itemprop="dateCreated datePublished" datetime="2018-07-25T14:59:21+08:00">2018-07-25</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-12-16 14:31:36" itemprop="dateModified" datetime="2018-12-16T14:31:36+08:00">2018-12-16</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"><h2 id="Maven-config"><a href="#Maven-config" class="headerlink" title="Maven config"></a>Maven config</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependencies&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">&lt;/dependencies&gt;</span><br></pre></td></tr></table></figure>
<p>Add <code>@EnableScheduling</code> annotation in application main or configuration class</p>
<h2 id="Thread-pool"><a href="#Thread-pool" class="headerlink" title="Thread pool"></a>Thread pool</h2><p>In <code>org.springframework.scheduling.config.ScheduledTaskRegistrar</code><br>after the after properties set, spring set a default single thread excutor.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">scheduleTasks</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">long</span> now = System.currentTimeMillis();</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>.taskScheduler == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.localExecutor = Executors.newSingleThreadScheduledExecutor();</span><br><span class="line">        <span class="keyword">this</span>.taskScheduler = <span class="keyword">new</span> ConcurrentTaskScheduler(<span class="keyword">this</span>.localExecutor);</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>When the program’s schedules need time to deal with the job.<br>Single Thread excutor may cause job be blocked, then the job’s excuted time might be wrong.</p>
<p>So when the single node have hard works need be done precisely, we need a selfdefine threadpool.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ScheduleConfig</span> <span class="keyword">implements</span> <span class="title">SchedulingConfigurer</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">configureTasks</span><span class="params">(ScheduledTaskRegistrar taskRegistrar)</span> </span>&#123;</span><br><span class="line">        taskRegistrar.setScheduler(taskExecutor());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span>(destroyMethod=<span class="string">"shutdown"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Executor <span class="title">taskExecutor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Executors.newScheduledThreadPool(<span class="number">20</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Close"><a href="#Close" class="headerlink" title="Close"></a>Close</h2><p>When the web application closed, the threadpool is still alive, we need actively close it.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">public class MyTask implements DisposableBean&#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void destroy() throws Exception &#123;</span><br><span class="line">        ThreadPoolTaskScheduler scheduler =</span><br><span class="line">            (ThreadPoolTaskScheduler)applicationContext.getBean(&quot;scheduler&quot;);</span><br><span class="line">        scheduler.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Cluster"><a href="#Cluster" class="headerlink" title="Cluster"></a>Cluster</h2><p>If the schedule needs enterprise level structure, a schedule cluster is needed.<br>Use consistency middle ware/[DB]/[Cache] control the schedule node’s behaviour.<br>Use Message queue control the job’s status/ corn, even add/ remove jobs.<br>Spring schedule not support the persistency feature, but through mechanism it still can be resolved.<br>If the requirement is that level, use spring schedule may not be a good choice.</p>
<p><a href="https://www.cnblogs.com/skychenjiajun/p/9057379.html" target="_blank" rel="noopener">https://www.cnblogs.com/skychenjiajun/p/9057379.html</a><br><a href="https://blog.csdn.net/qq_34125349/article/details/77430956" target="_blank" rel="noopener">https://blog.csdn.net/qq_34125349/article/details/77430956</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://linchenguang.com/2018/07/11/Kafka-quickstart-in-windows/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Leon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BurningBright">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/07/11/Kafka-quickstart-in-windows/" class="post-title-link" itemprop="url">Kafka quickstart in windows</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-07-11 10:23:10" itemprop="dateCreated datePublished" datetime="2018-07-11T10:23:10+08:00">2018-07-11</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-12-16 14:31:36" itemprop="dateModified" datetime="2018-12-16T14:31:36+08:00">2018-12-16</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/db/" itemprop="url" rel="index"><span itemprop="name">db</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"><h2 id="Download"><a href="#Download" class="headerlink" title="Download"></a>Download</h2><p>download kafka package from <a href="http://kafka.apache.org/downloads" target="_blank" rel="noopener">http://kafka.apache.org/downloads</a></p>
<p>un-tar package <code>kafka_2.11-1.1.0.tgz</code></p>
<h2 id="Start"><a href="#Start" class="headerlink" title="Start"></a>Start</h2><p>copy config file in <code>bin\windows</code><br>Start zookeeper first, because kafka is a cluster type middleware.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zookeeper-server-start.bat config/zookeeper.properties</span><br></pre></td></tr></table></figure></p>
<p>If alert <code>Error: can&#39;t find or can&#39;t load main class ...</code>,<br>modify <code>bin\windows\kafka-run-class.bat</code></p>
<p>add Double quotation mark to <code>%CLASSPATH%</code> like this : <code>&quot;%CLASSPATH%&quot;</code></p>
<p>Now start the Kafka server:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kafka-server-start.sh config/server.properties</span><br></pre></td></tr></table></figure></p>
<h2 id="Create-topic"><a href="#Create-topic" class="headerlink" title="Create topic"></a>Create topic</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kafka-topics.bat --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic test</span><br><span class="line"></span><br><span class="line">kafka-topics.bat --list --zookeeper localhost:2181</span><br></pre></td></tr></table></figure>
<h2 id="Send-messages-Producer"><a href="#Send-messages-Producer" class="headerlink" title="Send messages[Producer]"></a>Send messages[Producer]</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kafka-console-producer.bat --broker-list localhost:9092 --topic test</span><br><span class="line">&gt; Hello world</span><br><span class="line">&gt; Hello topic</span><br></pre></td></tr></table></figure>
<h2 id="Start-a-consumer"><a href="#Start-a-consumer" class="headerlink" title="Start a consumer"></a>Start a consumer</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">kafka-console-consumer.bat --bootstrap-server localhost:9092 --topic test --from-beginning</span><br><span class="line">Hello world</span><br><span class="line">Hello topic</span><br><span class="line">_</span><br></pre></td></tr></table></figure>
<h2 id="Multi-broker-cluster"><a href="#Multi-broker-cluster" class="headerlink" title="Multi-broker cluster"></a>Multi-broker cluster</h2><p>copy <code>server.properties</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">copy config/server.properties config/server-1.properties</span><br><span class="line">copy config/server.properties config/server-2.properties</span><br></pre></td></tr></table></figure></p>
<p>modify configuration:<br>In same machine, node’s id/ port must be unique, log file should be seperated.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">config/server-1.properties:</span><br><span class="line">    broker.id=1</span><br><span class="line">    listeners=PLAINTEXT://:9093</span><br><span class="line">    log.dir=/tmp/kafka-logs-1</span><br><span class="line"></span><br><span class="line">config/server-2.properties:</span><br><span class="line">    broker.id=2</span><br><span class="line">    listeners=PLAINTEXT://:9094</span><br><span class="line">    log.dir=/tmp/kafka-logs-2</span><br></pre></td></tr></table></figure></p>
<p>Now start other two broker<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kafka-server-start.sh config/server-1.properties</span><br><span class="line">kafka-server-start.sh config/server-2.properties</span><br></pre></td></tr></table></figure></p>
<p>Create new topic<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kafka-topics.bat --create --zookeeper localhost:2181 --replication-factor 3 --partitions 1 --topic my-replicated-topic</span><br></pre></td></tr></table></figure></p>
<p>Show detail<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kafka-topics.bat --describe --zookeeper localhost:2181 --topic my-replicated-topic</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kafka-topics.bat --describe --zookeeper localhost:2181 --topic my-replicated-topic</span><br><span class="line">Topic:my-replicated-topic       PartitionCount:1        ReplicationFactor:3 Configs:</span><br><span class="line">        Topic: my-replicated-topic      Partition: 0    Leader: 2       Replicas: 2,0,1 Isr: 2,0,1</span><br></pre></td></tr></table></figure>
<ul>
<li>“leader” is the node responsible for all reads and writes for the given partition.<br>Each node will be the leader for a randomly selected portion of the partitions.</li>
<li>“replicas” is the list of nodes that replicate the log for this partition<br>regardless of whether they are the leader or even if they are currently alive.</li>
<li>“isr” is the set of “in-sync” replicas. This is the subset of the replicas list<br>that is currently alive and caught-up to the leader.</li>
</ul>
<p>send some message<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">kafka-console-producer.bat --broker-list localhost:9092 --topic my-replicated-topic</span><br><span class="line">&gt; test message 1</span><br><span class="line">&gt; test message 2</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></p>
<p>consume these messages<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">kafka-console-consumer.bat --bootstrap-server localhost:9092 --from-beginning --topic my-replicated-topic</span><br><span class="line">test message 1</span><br><span class="line">test message 2</span><br><span class="line">_</span><br></pre></td></tr></table></figure></p>
<p>now the leader broker id is <code>2</code>, kill it[ ctrl+c ]<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; wmic process where &quot;caption = &apos;java.exe&apos; and commandline like &apos;%server-2.properties%&apos;&quot; get processid</span><br><span class="line">ProcessId</span><br><span class="line">6016</span><br><span class="line">&gt; taskkill /pid 6016 /f</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kafka-topics.bat --describe --zookeeper localhost:2181 --topic my-replicated-topic</span><br><span class="line">Topic:my-replicated-topic       PartitionCount:1        ReplicationFactor:3 Configs:</span><br><span class="line">        Topic: my-replicated-topic      Partition: 0    Leader: 0       Replicas: 2,0,1 Isr: 0,1</span><br></pre></td></tr></table></figure>
<p>now only 0,1 broker ‘in-sync’, the leader is ‘0’ broker<br>send message still available.</p>
<h2 id="import-export-data"><a href="#import-export-data" class="headerlink" title="import / export data"></a>import / export data</h2><p>make a test file<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; echo foo&gt; test.txt</span><br><span class="line">&gt; echo bar&gt;&gt; test.txt</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">connect-standalone.bat config/connect-standalone.properties config/connect-file-source.properties config/connect-file-sink.properties</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; type test.sink.txt</span><br><span class="line">foo</span><br><span class="line">bar</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kafka-console-consumer.bat --bootstrap-server localhost:9092 --topic connect-test --from-beginning</span><br><span class="line">&#123;&quot;schema&quot;:&#123;&quot;type&quot;:&quot;string&quot;,&quot;optional&quot;:false&#125;,&quot;payload&quot;:&quot;foo&quot;&#125;</span><br><span class="line">&#123;&quot;schema&quot;:&#123;&quot;type&quot;:&quot;string&quot;,&quot;optional&quot;:false&#125;,&quot;payload&quot;:&quot;bar&quot;&#125;</span><br></pre></td></tr></table></figure>
<p>If add more string append to <code>test.txt</code>, topic will load more data, and <code>test.sink.txt</code> will in-sync too.</p>
<p><a href="http://kafka.apache.org/quickstart" target="_blank" rel="noopener">http://kafka.apache.org/quickstart</a><br><a href="https://blog.csdn.net/cx2932350/article/details/78870135" target="_blank" rel="noopener">https://blog.csdn.net/cx2932350/article/details/78870135</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://linchenguang.com/2018/06/15/Convert-picture-to-customized-size/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Leon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BurningBright">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/06/15/Convert-picture-to-customized-size/" class="post-title-link" itemprop="url">Convert picture to customized size</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-06-15 10:04:55" itemprop="dateCreated datePublished" datetime="2018-06-15T10:04:55+08:00">2018-06-15</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-12-16 14:31:36" itemprop="dateModified" datetime="2018-12-16T14:31:36+08:00">2018-12-16</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"><h3 id="Main-method"><a href="#Main-method" class="headerlink" title="Main method"></a>Main method</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> BufferedImage <span class="title">imageConvert</span><span class="params">(InputStream inputStream, Integer limit)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (inputStream == <span class="keyword">null</span> || limit == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    <span class="comment">// init</span></span><br><span class="line">    BufferedImage inputImage = ImageIO.read(inputStream);</span><br><span class="line">    <span class="keyword">int</span> size = getImageSize(inputImage);</span><br><span class="line">    <span class="keyword">if</span> (size &lt;= <span class="number">0</span> || inputImage == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// loop reduce pixel</span></span><br><span class="line">    <span class="keyword">while</span> (size &gt; imgLimit) &#123;</span><br><span class="line">        <span class="comment">// calculate edge shrink propotion</span></span><br><span class="line">        <span class="comment">// minus .05 improve convert speed</span></span><br><span class="line">        <span class="keyword">double</span> rate = (<span class="keyword">double</span>)imgLimit/size - .<span class="number">05</span>;</span><br><span class="line">        <span class="comment">// if origin is 20 times than limit, rate may little than 0</span></span><br><span class="line">        <span class="comment">// set ten times smaller than origin as default</span></span><br><span class="line">        <span class="keyword">if</span> (rate &lt; <span class="number">0</span>) rate = .<span class="number">1</span>;</span><br><span class="line">        rate = Math.sqrt(rate);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> width = (<span class="keyword">int</span>)(inputImage.getWidth(<span class="keyword">null</span>) * rate);</span><br><span class="line">        <span class="keyword">int</span> height = (<span class="keyword">int</span>)(inputImage.getHeight(<span class="keyword">null</span>) * rate);</span><br><span class="line">        BufferedImage outputImage = imageCompress(inputImage, width, height);</span><br><span class="line">        inputImage = outputImage;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// recalculate</span></span><br><span class="line">        size = getImageSize(inputImage);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> inputImage;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Assistant-method"><a href="#Assistant-method" class="headerlink" title="Assistant method"></a>Assistant method</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getImageSize</span><span class="params">(BufferedImage img)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    ByteArrayOutputStream byteOS = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line">    ImageIO.write(img, <span class="string">"jpg"</span>, byteOS);</span><br><span class="line">    <span class="keyword">int</span> size = byteOS.size();</span><br><span class="line">    byteOS.close();</span><br><span class="line">    <span class="keyword">return</span> size;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> BufferedImage <span class="title">imageCompress</span><span class="params">(Image img, <span class="keyword">int</span> w, <span class="keyword">int</span> h)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    BufferedImage image = <span class="keyword">new</span> BufferedImage(w, h, BufferedImage.TYPE_INT_RGB );</span><br><span class="line">    <span class="comment">// redraw converted graph</span></span><br><span class="line">    image.getGraphics().drawImage(img, <span class="number">0</span>, <span class="number">0</span>, w, h, <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line">    ByteArrayOutputStream byteOS = <span class="keyword">new</span> ByteArrayOutputStream(<span class="number">256</span>);</span><br><span class="line">    ImageIO.write(image, <span class="string">"jpg"</span>, byteOS);</span><br><span class="line">    ByteArrayInputStream byteIS = <span class="keyword">new</span> ByteArrayInputStream(byteOS.toByteArray());</span><br><span class="line">    BufferedImage product = ImageIO.read(byteIS);</span><br><span class="line">    byteOS.close();</span><br><span class="line">    byteIS.close();</span><br><span class="line">    <span class="keyword">return</span> product;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h3><p>Use memory to loop picture may cause leak problem.<br>Use 3th part software maybe a better choice? like ffmpeg.</p>
<p><a href="https://www.cnblogs.com/shoufengwei/p/8526105.html" target="_blank" rel="noopener">https://www.cnblogs.com/shoufengwei/p/8526105.html</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://linchenguang.com/2018/06/12/Install-mysql-linux-5-7-22/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Leon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BurningBright">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/06/12/Install-mysql-linux-5-7-22/" class="post-title-link" itemprop="url">Install mysql linux 5.7.22</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-06-12 14:53:48" itemprop="dateCreated datePublished" datetime="2018-06-12T14:53:48+08:00">2018-06-12</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-12-16 14:31:36" itemprop="dateModified" datetime="2018-12-16T14:31:36+08:00">2018-12-16</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/db/" itemprop="url" rel="index"><span itemprop="name">db</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"><h3 id="Decompress-package"><a href="#Decompress-package" class="headerlink" title="Decompress package"></a>Decompress package</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local</span><br><span class="line">tar -xzvf mysql-5.7.22-linux-glibc2.12-x86_64.tar.gz</span><br><span class="line">rm -f mysql-5.7.22-linux-glibc2.12-x86_64.tar.gz</span><br><span class="line">mv mysql-5.7.22-linux-glibc2.12-x86_64.tar.gz mysql</span><br></pre></td></tr></table></figure>
<h3 id="Group-amp-User"><a href="#Group-amp-User" class="headerlink" title="Group &amp; User"></a>Group &amp; User</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># linux account</span><br><span class="line">groupadd mysql</span><br><span class="line">useradd -r -g mysql mysql</span><br><span class="line"></span><br><span class="line"># dataspace</span><br><span class="line">cd /usr/local/mysql</span><br><span class="line">mkdir data</span><br><span class="line"></span><br><span class="line"># privilege</span><br><span class="line">cd /usr/local</span><br><span class="line">chown -R mysql mysql/</span><br><span class="line">chgrp -R mysql mysql/</span><br></pre></td></tr></table></figure>
<h3 id="Init"><a href="#Init" class="headerlink" title="Init"></a>Init</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/mysql/bin</span><br><span class="line"></span><br><span class="line">./mysqld --initialize</span><br><span class="line">--user=mysql</span><br><span class="line">--basedir=/usr/local/mysql/</span><br><span class="line">--datadir=/usr/local/mysql/data/</span><br><span class="line">--lc_messages_dir=/usr/local/mysql/share</span><br><span class="line">--lc_messages=en_US</span><br></pre></td></tr></table></figure>
<p>remember the init root password</p>
<h3 id="Setting"><a href="#Setting" class="headerlink" title="Setting"></a>Setting</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/my.cnf</span><br><span class="line"># modify</span><br><span class="line"></span><br><span class="line">basedir=/usr/local/mysql/</span><br><span class="line">datadir=/usr/local/mysql/data</span><br><span class="line">port=3306</span><br><span class="line">character-set-server=utf8</span><br><span class="line">explicit_defaults_for_timestamp=true</span><br><span class="line"></span><br><span class="line">#datadir=/var/lib/mysql</span><br><span class="line">#socket=/usr/local/mysql/data/mysql.sock</span><br><span class="line">user=mysql</span><br></pre></td></tr></table></figure>
<h3 id="Service"><a href="#Service" class="headerlink" title="Service"></a>Service</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/mysql/support-files/</span><br><span class="line">cp mysql.server /etc/init.d/mysql</span><br><span class="line">vi /etc/init.d/mysql</span><br><span class="line"></span><br><span class="line"># add setting</span><br><span class="line">basedir=/usr/local/mysql/</span><br><span class="line">datadir=/usr/local/mysql/data/</span><br><span class="line"></span><br><span class="line">chmod +x /etc/init.d/mysql</span><br><span class="line">chkconfig --add mysql</span><br></pre></td></tr></table></figure>
<h3 id="privilege"><a href="#privilege" class="headerlink" title="privilege"></a>privilege</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/mysql/bin</span><br><span class="line">./mysql -u root -p</span><br><span class="line">set password=password(&quot;root&quot;);</span><br><span class="line">grant all privileges on *.* to&apos;root&apos; @&apos;%&apos; identified by &apos;root&apos;;</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure>
<h3 id="Exception"><a href="#Exception" class="headerlink" title="Exception"></a>Exception</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqld: Can&apos;t create/write to file &apos;/tmp/ibgXpx9Y&apos; (Errcode: 13 - Permission denied)</span><br></pre></td></tr></table></figure>
<p>if the /tmp dirctory have no permission:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 777 /tmp</span><br></pre></td></tr></table></figure></p>
<p><a href="https://blog.csdn.net/NB6063/article/details/80417319" target="_blank" rel="noopener">https://blog.csdn.net/NB6063/article/details/80417319</a><br><a href="https://blog.csdn.net/shaochenshuo/article/details/51375905" target="_blank" rel="noopener">https://blog.csdn.net/shaochenshuo/article/details/51375905</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://linchenguang.com/2018/06/11/Intelij-maven-3-x-nexus-2-x/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Leon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BurningBright">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/06/11/Intelij-maven-3-x-nexus-2-x/" class="post-title-link" itemprop="url">Intelij maven 3.x & nexus 2.x</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-06-11 14:42:18" itemprop="dateCreated datePublished" datetime="2018-06-11T14:42:18+08:00">2018-06-11</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-06-07 19:15:12" itemprop="dateModified" datetime="2019-06-07T19:15:12+08:00">2019-06-07</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"><h3 id="install-nexus-2-x-first-need-java-1-7"><a href="#install-nexus-2-x-first-need-java-1-7" class="headerlink" title="install nexus 2.x first , need java 1.7+"></a>install nexus 2.x first , need java 1.7+</h3><p><a href="https://www.sonatype.com/download-oss-sonatype" target="_blank" rel="noopener">https://www.sonatype.com/download-oss-sonatype</a></p>
<h3 id="config-nexus"><a href="#config-nexus" class="headerlink" title="config nexus"></a>config nexus</h3><p>Add a user <code>user</code> pass <code>pass</code>, grant privilege<br>For example a project named <code>InitialD</code><br>Add a repository <code>InitialD-release</code><br>Add a repository <code>InitialD-snapshot</code></p>
<h3 id="install-maven-3-x"><a href="#install-maven-3-x" class="headerlink" title="install maven 3.x"></a>install maven 3.x</h3><p>Add environment variable <code>MAVEN_HOME</code> to the maven dirctory.<br>Modify environment variable <code>path</code> add <code>;%M2_HOME%\bin</code><br><a href="http://maven.apache.org/download.cgi" target="_blank" rel="noopener">http://maven.apache.org/download.cgi</a></p>
<h3 id="config-maven"><a href="#config-maven" class="headerlink" title="config maven"></a>config maven</h3><p>Modify <code>%MAVEN_HOME%/conf/settings.xml</code> add servers-server / profile-repositories-repository</p>
<p>server:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">server</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>InitialD-release<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">username</span>&gt;</span>user<span class="tag">&lt;/<span class="name">username</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">password</span>&gt;</span>pass<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">server</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">server</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>InitialD-snapshot<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">username</span>&gt;</span>user<span class="tag">&lt;/<span class="name">username</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">password</span>&gt;</span>pass<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">server</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>repositorie:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">id</span>&gt;</span>InitialD-release<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">url</span>&gt;</span>http://127.0.0.1:8081/nexus/content/repositories/InitialD-release<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">id</span>&gt;</span>InitialD-snapshot<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">url</span>&gt;</span>http://127.0.0.1:8081:8081/nexus/content/repositories/InitialD-snapshot<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="Intelij-config"><a href="#Intelij-config" class="headerlink" title="Intelij config"></a>Intelij config</h3><p>change maven to self define package/ configure:<br><img src="/2018/06/11/Intelij-maven-3-x-nexus-2-x/m-setting.png" alt></p>
<p>modify pom.xml in intelij project:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">distributionManagement</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>dms-release<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>Team Nexus Release Repository<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://127.0.0.1:8081/nexus/content/repositories/InitialD-release<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">snapshotRepository</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>dms-snapshots<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>Team Nexus Snapshot Repository<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://127.0.0.1:8081/nexus/content/repositories/InitialD-snapshot<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">uniqueVersion</span>&gt;</span>false<span class="tag">&lt;/<span class="name">uniqueVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">snapshotRepository</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">distributionManagement</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>use maven plugin deploy package:<br><img src="/2018/06/11/Intelij-maven-3-x-nexus-2-x/d-setting.png" alt></p>
<p><a href="https://www.cnblogs.com/lyy-2016/p/5747631.html" target="_blank" rel="noopener">https://www.cnblogs.com/lyy-2016/p/5747631.html</a><br><a href="https://blog.csdn.net/win7system/article/details/51252275" target="_blank" rel="noopener">https://blog.csdn.net/win7system/article/details/51252275</a><br><a href="https://www.cnblogs.com/mfrbuaa/p/5408185.html" target="_blank" rel="noopener">https://www.cnblogs.com/mfrbuaa/p/5408185.html</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://linchenguang.com/2018/05/31/WebSocket-protocol/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Leon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BurningBright">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/05/31/WebSocket-protocol/" class="post-title-link" itemprop="url">WebSocket protocol</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-05-31 17:44:33" itemprop="dateCreated datePublished" datetime="2018-05-31T17:44:33+08:00">2018-05-31</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-12-16 14:31:36" itemprop="dateModified" datetime="2018-12-16T14:31:36+08:00">2018-12-16</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"><h2 id="Origin"><a href="#Origin" class="headerlink" title="Origin"></a>Origin</h2><p>WebSocket is design for intercommuncation[full duplex].<br>The <code>http</code> protocol is build in TCP[Transfer level], only one side can send or recevie.<br>When job is done, request will close the TCP connection.</p>
<p>If we want a long time alive connection.</p>
<ol>
<li>Http’s <code>keep-alive</code> head property is not design for long connection.<br>It’s design for increase effciency, in avoid 3 times <code>handclasp</code>.<br>When out of time, server will still close it.</li>
<li>Http loop request. it’s very common strategy, but very low effciency.</li>
<li>Make a <code>TCP</code> like connection, and keep it not be break.</li>
</ol>
<p><code>WebSocket</code> is just like <code>TCP</code> <code>UDP</code> work in <code>Transfer level</code>, a <code>socket</code> in origin.</p>
<p><img src="/2018/05/31/WebSocket-protocol/websocket-architecture.jpg" alt></p>
<h2 id="Connection"><a href="#Connection" class="headerlink" title="Connection"></a>Connection</h2><p>Create a server service<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> http = <span class="built_in">require</span>(<span class="string">"http"</span>);</span><br><span class="line"><span class="keyword">const</span> hostname = <span class="string">"127.0.0.1"</span>;</span><br><span class="line"><span class="keyword">const</span> port = <span class="string">"9090"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// create a service</span></span><br><span class="line"><span class="keyword">let</span> server = http.createServer(<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"recv request"</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(req.headers);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// create a listener</span></span><br><span class="line">server.listen(port, hostname, () =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`Server running at <span class="subst">$&#123;hostname&#125;</span>:<span class="subst">$&#123;port&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>Ceate a broser client<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCType html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">!<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> socket = <span class="keyword">new</span> WebSocket(<span class="string">'ws://127.0.0.1:9090'</span>);</span></span><br><span class="line"><span class="javascript">    socket.onopen = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">'opened'</span>);</span></span><br><span class="line"><span class="javascript">        socket.send(<span class="string">'hello, this is from client tiger'</span>);</span></span><br><span class="line">    &#125;;</span><br><span class="line">&#125;();</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="Service"><a href="#Service" class="headerlink" title="Service"></a>Service</h3><p>Nodejs do not execute the recall function. Because another <code>upgrade</code> event.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">server.on(<span class="string">"upgrade"</span>, (request, socket, head) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(request.headers);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>If make no response then connection closed before recevie headshake:<br><img src="/2018/05/31/WebSocket-protocol/error_1.png" alt></li>
</ul>
<p>In request header, <code>sec-websocket-key</code> is used to verify server is legal.<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">socket.write(<span class="string">'HTTP/1.1 101 Web Socket Protocol Handshake\r\n'</span> +</span><br><span class="line">        <span class="string">'Upgrade: WebSocket\r\n'</span> +</span><br><span class="line">        <span class="string">'Connection: Upgrade\r\n'</span> +</span><br><span class="line">        <span class="string">`Sec-WebSocket-Accept: \r\n`</span> +</span><br><span class="line">        <span class="string">'\r\n'</span>);</span><br></pre></td></tr></table></figure></p>
<ul>
<li>If the server response <code>sec-websocket-key</code> is not right, then data is dirty:<br><img src="/2018/05/31/WebSocket-protocol/error_2.png" alt></li>
</ul>
<hr>
<h3 id="Calculate"><a href="#Calculate" class="headerlink" title="Calculate"></a>Calculate</h3><p><code>Sec-WebSocket-Accept = base64(sha1(Sec-Websocket-key + GUID))</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># command</span><br><span class="line">npm init</span><br><span class="line">npm install sha1 --save</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> sha1 = <span class="built_in">require</span>(<span class="string">'sha1'</span>);</span><br><span class="line">server.on(<span class="string">"upgrade"</span>, (request, socket, head) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> secKey = request.headers[<span class="string">'sec-websocket-key'</span>];</span><br><span class="line">    <span class="comment">// RFC 6455 (GUID)</span></span><br><span class="line">    <span class="keyword">const</span> UNIQUE_IDENTIFIER = <span class="string">'258EAFA5-E914-47DA-95CA-C5AB0DC85B11'</span>;</span><br><span class="line">    <span class="comment">// calc sha1 base64</span></span><br><span class="line">    <span class="keyword">let</span> shaValue = sha1(secKey + UNIQUE_IDENTIFIER),</span><br><span class="line">        base64Value = Buffer.from(shaValue, <span class="string">'hex'</span>).toString(<span class="string">'base64'</span>);</span><br><span class="line">    socket.write(<span class="string">'HTTP/1.1 101 Web Socket Protocol Handshake\r\n'</span> +</span><br><span class="line">        <span class="string">'Upgrade: WebSocket\r\n'</span> +</span><br><span class="line">        <span class="string">'Connection: Upgrade\r\n'</span> +</span><br><span class="line">        <span class="string">`Sec-WebSocket-Accept: <span class="subst">$&#123;base64Value&#125;</span>\r\n`</span> +</span><br><span class="line">        <span class="string">'\r\n'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>ps. Look at the eyes and meet the right person :)</p>
<h2 id="Recevie"><a href="#Recevie" class="headerlink" title="Recevie"></a>Recevie</h2><p>Frame in documents is like this :<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">0               1               2               3              </span><br><span class="line">0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7</span><br><span class="line">+-+-+-+-+-------+-+-------------+-------------------------------+</span><br><span class="line">|F|R|R|R| opcode|M| Payload len |    Extended payload length    |</span><br><span class="line">|I|S|S|S|  (4)  |A|     (7)     |             (16/64)           |</span><br><span class="line">|N|V|V|V|       |S|             |   (if payload len==126/127)   |</span><br><span class="line">| |1|2|3|       |K|             |                               |</span><br><span class="line">+-+-+-+-+-------+-+-------------+ - - - - - - - - - - - - - - - +</span><br><span class="line">|     Extended payload length continued, if payload len == 127  |</span><br><span class="line">+ - - - - - - - - - - - - - - - +-------------------------------+</span><br><span class="line">|                               |Masking-key, if MASK set to 1  |</span><br><span class="line">+-------------------------------+-------------------------------+</span><br><span class="line">| Masking-key (continued)       |          Payload Data         |</span><br><span class="line">+-------------------------------- - - - - - - - - - - - - - - - +</span><br><span class="line">:                     Payload Data continued ...                :</span><br><span class="line">+ - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - +</span><br><span class="line">|                     Payload Data continued ...                |</span><br><span class="line">+---------------------------------------------------------------+</span><br></pre></td></tr></table></figure></p>
<ol>
<li>first level is the frame’s head<ul>
<li><code>FIN</code> finish if the bit is <code>1</code></li>
<li><code>RSV1</code> <code>RSV2</code> <code>RSV3</code> reserve bit some application use it to show wheather data is compressed.</li>
<li><code>opcode</code> operation code <code>0001</code> is text</li>
<li><code>MASK</code> mask the data space if the bit is <code>1</code></li>
<li><code>Payload len</code> data’s byte length</li>
<li><code>Extended ...</code> if the length cross 2^7[127], use other 8 bytes to store length.</li>
</ul>
</li>
<li>second level is masking-key space 4 bytes</li>
<li>third lecel is data space ? bytes</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">|Opcode  | Meaning                             | Reference |</span><br><span class="line">-+--------+-------------------------------------+-----------|</span><br><span class="line">| 0      | Continuation Frame                  | RFC 6455  |</span><br><span class="line">-+--------+-------------------------------------+-----------|</span><br><span class="line">| 1      | Text Frame                          | RFC 6455  |</span><br><span class="line">-+--------+-------------------------------------+-----------|</span><br><span class="line">| 2      | Binary Frame                        | RFC 6455  |</span><br><span class="line">-+--------+-------------------------------------+-----------|</span><br><span class="line">| 8      | Connection Close Frame              | RFC 6455  |</span><br><span class="line">-+--------+-------------------------------------+-----------|</span><br><span class="line">| 9      | Ping Frame                          | RFC 6455  |</span><br><span class="line">-+--------+-------------------------------------+-----------|</span><br><span class="line">| 10     | Pong Frame                          | RFC 6455  |</span><br><span class="line">-+--------+-------------------------------------+-----------|</span><br></pre></td></tr></table></figure>
<p>In browser if refresh the window, websocket will send the close frame:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">buffer len =  8</span><br><span class="line">&lt;Buffer 88 82 34 b3 e3 25 37 5a&gt;</span><br><span class="line">maskFlag = 1</span><br><span class="line">pLength = 2</span><br><span class="line">maskKey = 52,179,227,37[34 B3 E3 25]</span><br><span class="line">payloadHex  = 03 E9</span><br><span class="line">payloadText = ╚é</span><br></pre></td></tr></table></figure></p>
<h3 id="Analysis"><a href="#Analysis" class="headerlink" title="Analysis"></a>Analysis</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">socket.on(<span class="string">'data'</span>, buffer =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'buffer len = '</span>, buffer.length);</span><br><span class="line">    <span class="built_in">console</span>.log(buffer);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ------------------------</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> bitBuffer = <span class="keyword">new</span> BitBuffer(buffer);</span><br><span class="line">    <span class="keyword">let</span> maskFlag = bitBuffer._getBit(<span class="number">8</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'maskFlag = '</span> + maskFlag);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> payloadLen = bitBuffer.getBit(<span class="number">9</span>, <span class="number">7</span>),</span><br><span class="line">        maskKeys = bitBuffer.getMaskingKey(<span class="number">16</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'pLength = '</span> + payloadLen);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'maskKey = '</span> + maskKeys +</span><br><span class="line">    <span class="string">'['</span> + bitBuffer.bytesToHexString(maskKeys[<span class="number">0</span>]) + <span class="string">' '</span> +</span><br><span class="line">    bitBuffer.bytesToHexString(maskKeys[<span class="number">1</span>]) + <span class="string">' '</span> +</span><br><span class="line">    bitBuffer.bytesToHexString(maskKeys[<span class="number">2</span>]) + <span class="string">' '</span> +</span><br><span class="line">    bitBuffer.bytesToHexString(maskKeys[<span class="number">3</span>]) + <span class="string">']'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> payloadText = bitBuffer.getXorString(<span class="number">48</span> / <span class="number">8</span>, payloadLen, maskKeys);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'payloadText = '</span> + payloadText);</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BitBuffer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span> (buffer) &#123;</span><br><span class="line">        <span class="keyword">this</span>.buffer = buffer;</span><br><span class="line">        <span class="keyword">this</span>.hexChar = [<span class="string">'0'</span>, <span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'3'</span>, <span class="string">'4'</span>, <span class="string">'5'</span>,</span><br><span class="line">            <span class="string">'6'</span>, <span class="string">'7'</span>, <span class="string">'8'</span>, <span class="string">'9'</span>, <span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>, <span class="string">'D'</span>, <span class="string">'E'</span>, <span class="string">'F'</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// fetch xth bit content</span></span><br><span class="line">    _getBit (offset) &#123;</span><br><span class="line">        <span class="keyword">let</span> byteIndex = offset / <span class="number">8</span> &gt;&gt; <span class="number">0</span>,  <span class="comment">// target utf-8 character</span></span><br><span class="line">            byteOffset = offset % <span class="number">8</span>;      <span class="comment">// target bit offset in character</span></span><br><span class="line">        <span class="comment">// readUInt8 read the nth character data</span></span><br><span class="line">        <span class="keyword">let</span> num = <span class="keyword">this</span>.buffer.readUInt8(byteIndex) &amp; (<span class="number">1</span> &lt;&lt; (<span class="number">7</span> - byteOffset));</span><br><span class="line">        <span class="keyword">return</span> num &gt;&gt; (<span class="number">7</span> - byteOffset);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// [from, length]</span></span><br><span class="line">    getBit (offset, len = <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> result = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">            result += <span class="keyword">this</span>._getBit(offset + i) &lt;&lt; (len - i - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// masking-key</span></span><br><span class="line">    getMaskingKey (offset) &#123;</span><br><span class="line">        <span class="keyword">const</span> BYTE_COUNT = <span class="number">4</span>;</span><br><span class="line">        <span class="keyword">let</span> masks = [];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; BYTE_COUNT; i++)</span><br><span class="line">            masks.push(<span class="keyword">this</span>.getBit(offset + i * <span class="number">8</span>, <span class="number">8</span>));</span><br><span class="line">        <span class="keyword">return</span> masks;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// get plaintext</span></span><br><span class="line">    getXorString (byteOffset, byteCount, maskingKeys) &#123;</span><br><span class="line">        <span class="keyword">let</span> text = <span class="string">''</span>;</span><br><span class="line">        <span class="keyword">let</span> hex  = <span class="string">''</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; byteCount; i++) &#123;</span><br><span class="line">            <span class="keyword">let</span> j = i % <span class="number">4</span>;</span><br><span class="line">            <span class="comment">// get origin utf-8 encoded data though exclusive or</span></span><br><span class="line">            <span class="keyword">let</span> transformedByte = <span class="keyword">this</span>.buffer.readUInt8(byteOffset + i)</span><br><span class="line">                                      ^ maskingKeys[j];</span><br><span class="line">            <span class="comment">// put utf-8 bytes to ascii char</span></span><br><span class="line">            text += <span class="built_in">String</span>.fromCharCode(transformedByte);</span><br><span class="line">            hex += <span class="keyword">this</span>.bytesToHexString(transformedByte) + <span class="string">' '</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'payloadHex  = '</span> + hex);</span><br><span class="line">        <span class="keyword">return</span> text;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// char to 2-hex String</span></span><br><span class="line">    bytesToHexString(num) &#123;</span><br><span class="line">        <span class="keyword">let</span> text = <span class="string">''</span>;</span><br><span class="line">        text += <span class="keyword">this</span>.hexChar[num &gt;&gt;&gt; <span class="number">4</span> &amp; <span class="number">0xf</span>];</span><br><span class="line">        text += <span class="keyword">this</span>.hexChar[num &amp; <span class="number">0xf</span>];</span><br><span class="line">        <span class="keyword">return</span> text;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>socket.send(‘hello, this is from client tiger’);</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">buffer len =  38</span><br><span class="line">&lt;Buffer 81 a0 f1 3d 90 39 99 58 fc 55 9e 11 b0 4d 99 54 e3 19 9</span><br><span class="line">8 4e b0 5f 83 52 fd 19 92 51 f9 5c 9f 49 b0 4d 98 5a f5 4b&gt;</span><br><span class="line">maskFlag = 1</span><br><span class="line">pLength = 32</span><br><span class="line">maskKey = 241,61,144,57[F1 3D 90 39]</span><br><span class="line">payloadHex  = 68 65 6C 6C 6F 2C 20 74 68 69 73 20 69 73 20 66 7</span><br><span class="line">2 6F 6D 20 63 6C 69 65 6E 74 20 74 69 67 65 72</span><br><span class="line">payloadText = hello, this is from client tiger</span><br></pre></td></tr></table></figure>
<p>Toke last 4 bytes for example:<br>origin data is <code>98 5a f5 4b</code>, masking key is <code>F1 3D 90 39</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">98 5a f5 4b XOR F1 3D 90 39 = 69 67 65 72</span><br><span class="line">69 = &apos;i&apos;</span><br><span class="line">67 = &apos;g&apos;</span><br><span class="line">65 = &apos;e&apos;</span><br><span class="line">72 = &apos;r&apos;</span><br></pre></td></tr></table></figure></p>
<h3 id="Last-issue"><a href="#Last-issue" class="headerlink" title="Last issue"></a>Last issue</h3><p>In application websocket implements ping/pong[9/10] is used to make sure connection alive.<br>Client ping server every 30s, server response pong message frame.<br>If server not recevie client’s ping frame in 1 minute, it will close the connnection.</p>
<p>Broser websocket modual not implemented this mechanism.<br>If long connection is needed, you need loop ping frame by yourself.</p>
<p><a href="https://www.w3.org/TR/websockets/" target="_blank" rel="noopener">https://www.w3.org/TR/websockets/</a><br><a href="https://www.w3.org/TR/2011/WD-websockets-20110419/" target="_blank" rel="noopener">https://www.w3.org/TR/2011/WD-websockets-20110419/</a><br><a href="https://tools.ietf.org/html/rfc6455" target="_blank" rel="noopener">https://tools.ietf.org/html/rfc6455</a></p>
<p><a href="http://www.open-open.com/lib/view/open1527469228211.html" target="_blank" rel="noopener">http://www.open-open.com/lib/view/open1527469228211.html</a><br><a href="https://www.yinchengli.com/2018/05/27/chrome-websocket/" target="_blank" rel="noopener">https://www.yinchengli.com/2018/05/27/chrome-websocket/</a><br><a href="https://blog.jcoglan.com/2015/03/30/websocket-extensions-as-plugins/" target="_blank" rel="noopener">https://blog.jcoglan.com/2015/03/30/websocket-extensions-as-plugins/</a></p>
<p><a href="https://docs.spring.io/spring-framework/docs/5.0.0.BUILD-SNAPSHOT/spring-framework-reference/html/websocket.html" target="_blank" rel="noopener">https://docs.spring.io/spring-framework/docs/5.0.0.BUILD-SNAPSHOT/spring-framework-reference/html/websocket.html</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://linchenguang.com/2018/05/24/Mondrian-architecture/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Leon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BurningBright">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/05/24/Mondrian-architecture/" class="post-title-link" itemprop="url">Mondrian architecture</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-05-24 14:56:13" itemprop="dateCreated datePublished" datetime="2018-05-24T14:56:13+08:00">2018-05-24</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-12-16 14:31:36" itemprop="dateModified" datetime="2018-12-16T14:31:36+08:00">2018-12-16</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/db/" itemprop="url" rel="index"><span itemprop="name">db</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"><h2 id="Mondrian系统的图层"><a href="#Mondrian系统的图层" class="headerlink" title="Mondrian系统的图层"></a>Mondrian系统的图层</h2><p>OLAP: OnlineAnalytical Processing<br>Mondrian OLAP系统由四层组成; 从最终用户的眼睛到数据中心的核心，有如下：表示层，维度层，星层和存储层。</p>
<p>表示层决定最终用户在他或她的监视器上看到的内容，以及他或她如何交互以提出新问题。有多种方式可以呈现多维数据集，<br>包括数据透视表（上面显示的表格的交互式版本），饼图，线条和条形图以及高级可视化工具，如可点击的地图和动态图形。<br>这些可以用Swing或JSP编写，以JPEG或GIF格式呈现的图表或通过XML传输到远程应用程序。所有这些表示形式的共同之处在于<br>表示层提出问题的维度，度量和单元的多维“语法”，并且OLAP服务器返回答案。</p>
<p>第二层是维度层。维度层解析，验证并执行MDX查询。查询分多个阶段进行评估。首先计算坐标轴，然后计算坐标轴内单元格的值。<br>为了提高效率，维度层将批量请求发送给汇聚层。查询转换器允许应用程序操纵现有查询，而不是从头开始为每个请求构建MDX语句。<br>元数据描述了维度模型，以及它如何映射到关系模型。</p>
<p>第三层是星级层，负责维护聚合缓存。聚合是内存中的一组度量值’单元’[cells]，由一组维度列值限定。维度层发送单元组请求。<br>如果请求的单元格不在高速缓存中，或者通过在高速缓存中汇总聚合进行派生，则聚合管理器会向存储层发送请求。</p>
<p>存储层是一个RDBMS。它负责提供聚合的单元格数据，以及维度表中的成员。<br>我在下面描述为什么我决定使用RDBMS的功能，而不是开发针对多维数据优化的存储系统。</p>
<p>这些组件可以全部存在于同一台机器上，也可以分布在机器之间。构成Mondrian服务器的第2层和第3层必须位于同一台计算机上。<br>存储层可以在另一台机器上，通过远程JDBC连接访问。在多用户系统中，表示层将存在于每个最终用户的机器上（除了在服务器上生成的JSP页面的情况）。</p>
<p><img src="/2018/05/24/Mondrian-architecture/arch_mondrian_v1_lrg.png" alt><br><img src="/2018/05/24/Mondrian-architecture/architecture2_big.png" alt></p>
<h2 id="存储和聚合策略"><a href="#存储和聚合策略" class="headerlink" title="存储和聚合策略"></a>存储和聚合策略</h2><p>OLAP服务器通常根据其存储数据的方式进行分类：</p>
<ul>
<li>MOLAP（multidimensional  OLAP）服务器将其所有数据存储在磁盘中，并针对多维访问进行优化。<br>通常，数据以密集阵列存储，每个单元值只需要4或8个字节。</li>
<li>ROLAP（relational OLAP）服务器将其数据存储在关系数据库中。事实表中的每一行都有一个用于每个维度和度量的列。<br>需要存储三种数据：事实表数据（事务记录），聚合和维度。</li>
</ul>
<p>MOLAP数据库以多维格式存储事实数据，但如果维度不止一个维度，则这些数据将会很稀疏，并且多维格式表现不佳。<br>HOLAP（混合OLAP）系统通过在关系数据库中保留最细粒度的数据来解决此问题，但将聚合以多维格式存储。</p>
<p>预先计算的聚合对于大型数据集是必需的，否则某些查询在未读取事实表的全部内容的情况下不能被回答。<br>MOLAP聚合通常是内存数据结构的图像，分解成页面并存储在磁盘上。ROLAP聚合被存储在表中。<br>在一些ROLAP系统中，这些由OLAP服务器显式管理; 在其他系统中，这些表被声明为物化视图[materialized views]，<br>并且当OLAP服务器使用 group by子句中列的正确组合发出查询时，它们将被隐式使用。</p>
<p>聚合策略的最后组件是缓存。高速缓存将预先计算的聚合保存在内存中，以便后续查询可以访问单元值而不必访问磁盘。<br>如果缓存将所需数据集保留在较低级别的聚合中，则它可以通过<strong>卷起来</strong>计算所需的数据集。</p>
<p>缓存可以说是聚合策略中最重要的部分，因为它是自适应的。很难选择一组聚合来预先计算在不使用大量磁盘的情况下加速系统的速度，<br>特别是那些维度较高或用户提交不可预知查询的系统。在数据实时变化的系统中，维护预先计算的聚合是不切实际的。<br>合理大小的缓存可以允许系统在面对不可预知的查询时充分执行，而预先计算的聚合很少或没有。</p>
<p><code>蒙德里安</code>的汇总策略如下：</p>
<ul>
<li>事实数据存储在RDBMS中。RDBMS已经有一个存储管理器，为什么还要开发一个？</li>
<li>通过查询提交分组，将聚合数据读入缓存。同样，RDBMS有一个聚合器，为什么还要开发一个？</li>
<li>如果RDBMS支持实体化视图，并且数据库管理员选择为特定聚合创建实体化视图，则Mondrian将隐式使用它们。<br>理想情况下，<code>蒙德里安</code>的聚合管理者应该意识到存在这些物化视图，并且这些特定的聚合计算起来很便宜。<br>它甚至应该向数据库管理员提供调优建议。</li>
</ul>
<p>总体思路是将数据库的内容委托给数据库。<br>这给数据库带来了额外的负担，但是一旦将这些功能添加到数据库中，数据库的所有客户端都将从中受益。<br>多维存储可以减少I / O，并在某些情况下可以加快操作速度，但我认为这不足以保证现阶段的复杂性。</p>
<p>一个奇妙的副作用是因为Mondrian自己不需要存储空间，所以可以通过将JAR文件添加到类路径中并立即启动并运行来安装它。<br>由于没有冗余数据集进行管理，数据加载过程更容易，<strong>Mondrian非常适合在实时更改的数据集上执行OLAP。</strong></p>
<h2 id="API"><a href="#API" class="headerlink" title="API"></a>API</h2><p>Mondrian为客户端应用程序提供执行查询的API。</p>
<p>由于没有普遍接受的用于执行OLAP查询的API，Mondrian的主要API是专有的; 然而，任何使用过JDBC的人都会发现它很熟悉。<br>主要区别在于查询语言：Mondrian使用称为MDX的语言(M ulti- D dimension e X pressions)来指定查询，其中JDBC将使用SQL。<br>下面更详细地描述MDX。</p>
<p>连接 经由创建 的DriverManager，以类似的方式来JDBC。<br>一个 查询是类似于JDBC 声明，并且通过解析MDX字符串创建。<br>甲 结果是类似于JDBC 结果集 ; 因为我们正在处理多维数据，所以它由轴和单元组成，而不是行和列。<br>由于OLAP旨在用于数据挖掘，因此可以通过 drillDown和 sort等操作修改查询中包含的分析树 ，然后重新执行查询。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mondrian.olap.*;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line">Connection connection = DriverManager.getConnection(</span><br><span class="line">    <span class="string">"Provider=mondrian;"</span> +</span><br><span class="line">    <span class="string">"Jdbc=jdbc:odbc:MondrianFoodMart;"</span> +</span><br><span class="line">    <span class="string">"Catalog=/WEB-INF/FoodMart.xml;"</span>,</span><br><span class="line">    <span class="keyword">null</span>,</span><br><span class="line">    <span class="keyword">false</span>);</span><br><span class="line">Query query = connection.parseQuery(</span><br><span class="line">    <span class="string">"SELECT &#123;[Measures].[Unit Sales], [Measures].[Store Sales]&#125; on columns,"</span> +</span><br><span class="line">    <span class="string">"&#123;[Product].children&#125; on rows "</span> +</span><br><span class="line">    <span class="string">"FROM [Sales] "</span> +</span><br><span class="line">    <span class="string">"WHERE ([Time].[1997].[Q1], [Store].[CA].[San Francisco])"</span>);</span><br><span class="line">Result result = connection.execute(query);</span><br><span class="line">result.print(<span class="keyword">new</span> PrintWriter(System.out));</span><br></pre></td></tr></table></figure>
<p>API还将数据库模式呈现为一组对象： 模式， 多维数据集， 维度， 层次结构， 级别， 成员。<br>有关Mondrian API的更多信息，请参阅 javadoc。</p>
<p>用于分析的XML是通过SOAP（简单对象访问协议）访问OLAP服务器的标准。<br>这允许Microsoft Excel等非Java组件针对Mondrian运行查询。</p>
<p><code>蒙德里安</code>包括对 JSR-069(‘JOLAP’)提议标准的支持，<br>但是在明确标准永远不会被批准的情况下，这一支持在mondrian-2.3中被删除。</p>
<p><a href="https://mondrian.pentaho.com/documentation/architecture.php#Figure_1:_Mondrian_architecture" target="_blank" rel="noopener">https://mondrian.pentaho.com/documentation/architecture.php#Figure_1:_Mondrian_architecture</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://linchenguang.com/2018/05/22/python-encode/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Leon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BurningBright">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/05/22/python-encode/" class="post-title-link" itemprop="url">python encode</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-05-22 16:10:13" itemprop="dateCreated datePublished" datetime="2018-05-22T16:10:13+08:00">2018-05-22</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-12-16 14:31:36" itemprop="dateModified" datetime="2018-12-16T14:31:36+08:00">2018-12-16</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"><h2 id="Declare"><a href="#Declare" class="headerlink" title="Declare"></a>Declare</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding:utf-8 -*-</span><br></pre></td></tr></table></figure>
<p>make clare that the origin code context use utf-8 encoding.</p>
<p>if not declate when unioncode sign appare in origin text, python throw exception:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SyntaxError: Non-ASCII character &apos;\xe4&apos; in file code_test.py on line 6,</span><br><span class="line">but no encoding declared; see http://python.org/dev/peps/pep-0263/ for details</span><br></pre></td></tr></table></figure>
<h2 id="Setting-default-encoding"><a href="#Setting-default-encoding" class="headerlink" title="Setting default encoding"></a>Setting default encoding</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import sys</span><br><span class="line">reload(sys)</span><br><span class="line">sys.setdefaultencoding(&apos;utf8&apos;)</span><br></pre></td></tr></table></figure>
<p>told python use <code>utf8</code> as the default encoding to deal symbols<br>python’s type <code>str</code> use <code>ascii</code> as the default encoding ps. v2.7</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">UnicodeEncodeError: &apos;ascii&apos; codec can&apos;t encode character u&apos;\u4e07&apos; in position 0:</span><br><span class="line">ordinal not in range(128)</span><br></pre></td></tr></table></figure>
<h2 id="Exception-in-db"><a href="#Exception-in-db" class="headerlink" title="Exception in db"></a>Exception in db</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UnicodeEncodeError:&apos;latin-1&apos; codec can&apos;t encode character ...</span><br></pre></td></tr></table></figure>
<p>declare the connection and the cursor’s encoding:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">db = pymysql.connect(&quot;localhost&quot;, &quot;use&quot;, &quot;passwd&quot;, &quot;db_name&quot; , use_unicode=True,  charset=&quot;utf8&quot;)</span><br><span class="line">db = MySQLdb.connect(host=&quot;localhost&quot;, user = &quot;root&quot;, passwd = &quot;&quot;, db = &quot;testdb&quot;, use_unicode=True, charset=&quot;utf8&quot;)</span><br><span class="line">cursor.execute(&apos;SET NAMES utf8;&apos;)</span><br><span class="line">cursor.execute(&apos;SET CHARACTER SET utf8;&apos;)</span><br><span class="line">cursor.execute(&apos;SET character_set_connection=utf8;&apos;)</span><br></pre></td></tr></table></figure></p>
<h2 id="Exception-in-wb"><a href="#Exception-in-wb" class="headerlink" title="Exception in wb"></a>Exception in wb</h2><p>If the web is encoded in <code>gbk</code> or <code>gb2312</code>, use <code>utf8</code> to show will case messy encoding</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">html = unicode(html, &quot;gbk&quot;).encode(&quot;utf8&quot;)</span><br></pre></td></tr></table></figure>
<p>turn the bytes stream to unicode first in <code>gbk</code> decoding, then encoding in <code>utf8</code></p>
<h2 id="Encoding-transform"><a href="#Encoding-transform" class="headerlink" title="Encoding transform"></a>Encoding transform</h2><ol>
<li>if in origin code <code>str</code> delcare has the prfix <code>u</code> then it is unicde encoding</li>
<li>if origin code <code>str</code> has no prefix <code>u</code> then it use it’s text encoding</li>
<li>use <code>unicode(str, codec)</code> to transform <code>str</code> to unicode</li>
<li>most times use <code>str.decode(codec)</code> to decode to bytes stream</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">reload(sys)</span><br><span class="line">sys.setdefaultencoding(<span class="string">'utf8'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># u'\u4e07'</span></span><br><span class="line">a = <span class="string">u"万"</span></span><br><span class="line"><span class="keyword">print</span> a</span><br><span class="line"><span class="keyword">print</span> ord(a)</span><br><span class="line"><span class="keyword">print</span> unichr(ord(a))</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"----------------"</span></span><br><span class="line"></span><br><span class="line">b = a.encode(<span class="string">'utf8'</span>)</span><br><span class="line"><span class="keyword">print</span> b</span><br><span class="line">c = a.encode(<span class="string">'gbk'</span>)</span><br><span class="line"><span class="keyword">print</span> c</span><br></pre></td></tr></table></figure>
<p>in windows bash termianl’s encode is <code>utf8</code> , <code>gbk</code> is messy encoding<br><img src="/2018/05/22/python-encode/bash.png" alt="bash"><br>in windows dos terminal’s encode is <code>gbk</code> , <code>utf8</code> is messy encoding<br><img src="/2018/05/22/python-encode/dos.png" alt="dos"></p>
<h2 id="Encoding-in-json"><a href="#Encoding-in-json" class="headerlink" title="Encoding in json"></a>Encoding in json</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">json.dumps # turn json object -&gt; string</span><br><span class="line">json.loads # turn json string -&gt; object</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># add encoding parameter</span><br><span class="line">json.loads(jStr, encoding=&quot;GB2312&quot;);</span><br><span class="line"># restrict the string in unicode encoding</span><br><span class="line">json.dumps(js, ensure_ascii=False)</span><br></pre></td></tr></table></figure>
<p><a href="https://stackoverflow.com/questions/3942888/unicodeencodeerror-latin-1-codec-cant-encode-character" target="_blank" rel="noopener">https://stackoverflow.com/questions/3942888/unicodeencodeerror-latin-1-codec-cant-encode-character</a></p>
<p><a href="https://blog.csdn.net/learn_tech/article/details/52982679" target="_blank" rel="noopener">https://blog.csdn.net/learn_tech/article/details/52982679</a></p>
<p><a href="https://blog.csdn.net/xfyangle/article/details/60969522" target="_blank" rel="noopener">https://blog.csdn.net/xfyangle/article/details/60969522</a></p>
<p><a href="https://blog.csdn.net/ran337287/article/details/56298949" target="_blank" rel="noopener">https://blog.csdn.net/ran337287/article/details/56298949</a></p>
<p><a href="https://blog.csdn.net/chenzy945/article/details/18267905" target="_blank" rel="noopener">https://blog.csdn.net/chenzy945/article/details/18267905</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://linchenguang.com/2018/05/20/Servlet-request/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Leon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BurningBright">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/05/20/Servlet-request/" class="post-title-link" itemprop="url">Servlet request</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-05-20 11:08:32" itemprop="dateCreated datePublished" datetime="2018-05-20T11:08:32+08:00">2018-05-20</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-12-16 14:31:36" itemprop="dateModified" datetime="2018-12-16T14:31:36+08:00">2018-12-16</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"><p><code>2017-09-05 17:05:47</code></p>
<h3 id="Fetch-URL"><a href="#Fetch-URL" class="headerlink" title="Fetch URL"></a>Fetch URL</h3><p><code>request.getRequestURL()</code></p>
<h3 id="Parameter-List"><a href="#Parameter-List" class="headerlink" title="Parameter List"></a>Parameter List</h3><ul>
<li><p>Request in <code>GET</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8070/serverLab/hello?a=1&amp;b=2</span><br><span class="line">request.getQueryString()</span><br><span class="line">result: a=1&amp;b=2</span><br></pre></td></tr></table></figure>
</li>
<li><p>Request in <code>POST</code> or <code>GET</code></p>
</li>
</ul>
<ol>
<li><p><code>getParameter()</code><br>This method limited in form’s encoding<br>only used in <code>application/x- www-form-urlencoded</code><br>Advantage is very simple, disadvantage is not suit in big data.<br>When transfer big data block browser use <code>multipart/form-data</code></p>
</li>
<li><p><code>getInputStream()</code> <code>getReader()</code><br>Get context by stream, got bytes or characters</p>
</li>
</ol>
<p>Stream way have conflict with parameter way<br>When <code>getParameter()</code> read a from encoded by <code>application/x- www-form-urlencoded</code> once<br><code>getInputStream()</code> can’t read data any more.vice versa.</p>
<p>When <code>getParameter()</code> read a from encoded by <code>multipart/form-data</code>, can’t read data<br>So <code>multipart/form-data</code> encoding have no conflict.</p>
<p>PS. <code>request.getInputStream()</code> <code>request.getReader()</code> can’t use in mix or throw exception</p>
<h3 id="About-request-getAttribute"><a href="#About-request-getAttribute" class="headerlink" title="About request.getAttribute()"></a>About <code>request.getAttribute()</code></h3><ol>
<li>Attribute is survive in container</li>
<li>HttpServletRequest only have <code>setAttribute()</code> on <code>setParameter()</code></li>
<li>Survive in one request, like <code>forward</code></li>
<li><code>session.setAttribute()</code> have Affect in a progress</li>
<li>If from’s data come’s from JS, use a hidden div parse data -_-!!!</li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/19/">19</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Leon</p>
              <div class="site-description motion-element" itemprop="description"></div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">186</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">20</span>
                    <span class="site-state-item-name">categories</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">71</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/burningbright" title="GitHub &rarr; https://github.com/burningbright" rel="noopener" target="_blank"><i class="fa fa-fw fa-globe"></i>GitHub</a>
                </span>
              
            </div>
          

          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.mathjax.org/#demo" title="https://www.mathjax.org/#demo" rel="noopener" target="_blank">mathjax</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.katex.org" title="https://www.katex.org" rel="noopener" target="_blank">katex</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.linchenguang.com/cron" title="http://www.linchenguang.com/cron" rel="noopener" target="_blank">cron</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.linchenguang.com/dos" title="http://www.linchenguang.com/dos" rel="noopener" target="_blank">dos</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.linchenguang.com/keyboard" title="http://www.linchenguang.com/keyboard" rel="noopener" target="_blank">keyboard</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.linchenguang.com/regex" title="http://www.linchenguang.com/regex" rel="noopener" target="_blank">regex</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.linchenguang.com/sql" title="http://www.linchenguang.com/sql" rel="noopener" target="_blank">sql</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.linchenguang.com/toy" title="http://www.linchenguang.com/toy" rel="noopener" target="_blank">toy</a>
                  </li>
                
              </ul>
            </div>
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Leon</span>

  

  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.1.2</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.2"></script>

  <script src="/js/motion.js?v=7.1.2"></script>



  
  


  <script src="/js/schemes/muse.js?v=7.1.2"></script>



  

  


  <script src="/js/next-boot.js?v=7.1.2"></script>


  

  

  

  



  




  

  

  
  

  
  
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
  

  


  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
